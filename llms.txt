# potools: Tools for Portability and Internationalization of R packages

## Overview

R users are a global community. From Xiamen to Santiago, Addis Ababa to
Tbilisi, Ogallala to Adelaide, R users are legion and speak many
different languages. To serve these diverse communities, R includes
built-in tools based on the [GNU gettext
system](https://www.gnu.org/software/gettext/) that make it possible to
translate user-facing communications like messages, warnings, and
errors. Unfortunately, this system uses new file types (`.pot`
templates, `.po` files, and `.mo` binaries) that come with their own
quirks and idiosyncrasies. The goal of potools is make it as easy as
possible to translate your package by abstracting away as many details
of the gettext system as possible.

The potool logo features a [potoo](https://en.wikipedia.org/wiki/Potoo)
and was designed by [Allison Horst](https://www.allisonhorst.com).

## Installation

Start by installing the released version potools from CRAN:

``` r
install.packages("potools")
```

Or the development version from GitHub:

``` r
# install.packages("remotes")
remotes::install_github("MichaelChirico/potools")
```

You’ll also need to install gettext, the GNU command line toolkit that
powers potools. Installation depends on your operating system:

- On Windows, gettext is bundled with
  [Rtools](https://cran.r-project.org/bin/windows/Rtools/), so if you’re
  developing packages you probably already have it.

- On Mac, it’s easiest to install with [brew](https://brew.sh):
  `brew install gettext`

- On Linux, it’s usually already installed; otherwise you’ll need to
  install `gettext` with your distro’s standard tool.

## Workflow

There are two core workflows provided by potools:

- [`translate_package()`](https://michaelchirico.github.io/potools/reference/translate_package.md)
  is a one-stop-shop for interactively setting your package and
  providing translations, as described in
  [`?translate_package`](https://michaelchirico.github.io/potools/reference/translate_package.md).

- [`po_extract()`](https://michaelchirico.github.io/potools/reference/po_extract.md),
  [`po_create()`](https://michaelchirico.github.io/potools/reference/po_create.md),
  [`po_update()`](https://michaelchirico.github.io/potools/reference/po_update.md),
  and
  [`po_compile()`](https://michaelchirico.github.io/potools/reference/po_compile.md)
  let you perform the individual steps of
  [`translate_package()`](https://michaelchirico.github.io/potools/reference/translate_package.md)
  as described in
  [`vignette("developers")`](https://michaelchirico.github.io/potools/articles/developers.md)
  and
  [`vignette("translators")`](https://michaelchirico.github.io/potools/articles/translators.md).

## Alternative software

`potools` is by no means the first tool for facilitating
internationalization; other open-source projects have deeper experience
in this domain and as a result there are some relatively mature options
for working with gettext/the po ecosystem in general. Here is a
smattering of such tools that I’ve come across:

- Poedit - <https://poedit.net/> - GUI Software for writing translations
- Gtranslator - <https://wiki.gnome.org/Apps/Gtranslator> - GNOME
  Translation editor
- Lokalize - <https://userbase.kde.org/Lokalize> - KDE’s Computer-Aided
  Translation system
- Virtaal - <https://virtaal.translatehouse.org/> - Another FOSS
  software for translation on the desktop; not actively maintained
- Pootle - <https://pootle.translatehouse.org/> - Web-based translation
  server, from the same team as Virtaal ([thesis comparing
  both](https://archive-ouverte.unige.ch/unige:75916)); not actively
  maintained
- Translate Toolkit - <https://toolkit.translatehouse.org/> -
  Command-line utilities and Python library underlying Virtaal and
  Pootle, and even Weblate
- Weblate - <https://weblate.org/> - Web-based translation server with
  git integration, [used by the R project](https://translate.rx.studio/)
  for its core and recommended packages [(the latter since the 2023
  Sprint)](https://contributor.r-project.org/r-project-sprint-2023/projects/weblate-improvements/)
- PO mode in Emacs - <https://www.emacswiki.org/emacs/PoMode>

# Package index

## Translate a package

- [`translate_package()`](https://michaelchirico.github.io/potools/reference/translate_package.md)
  : Interactively provide translations for a package's messages

- [`po_extract()`](https://michaelchirico.github.io/potools/reference/po_extract.md)
  :

  Extract messages for translation into a `.pot` file

- [`po_create()`](https://michaelchirico.github.io/potools/reference/po_create.md)
  :

  Create a new `.po` file

- [`po_compile()`](https://michaelchirico.github.io/potools/reference/po_compile.md)
  :

  Compile `.po` files to `.mo`

- [`po_update()`](https://michaelchirico.github.io/potools/reference/po_update.md)
  :

  Update all `.po` files with changes in `.pot`

- [`po_explain_plurals()`](https://michaelchirico.github.io/potools/reference/po_explain_plurals.md)
  : Explain plural message criteria verbally

## Check messages

- [`check_cracked_messages()`](https://michaelchirico.github.io/potools/reference/check_cracked_messages.md)
  : Check for cracked messages more suitable for templating
- [`check_potools_sys_reqs()`](https://michaelchirico.github.io/potools/reference/check_potools_sys_reqs.md)
  : Check if the proper system utilities for running package translation
  are installed
- [`check_untranslated_cat()`](https://michaelchirico.github.io/potools/reference/check_untranslated_cat.md)
  : Check for untranslated messages emitted by cat
- [`check_untranslated_src()`](https://michaelchirico.github.io/potools/reference/check_untranslated_src.md)
  : Check for cracked messages in C/C++ sources

## Internal helpers

- [`get_message_data()`](https://michaelchirico.github.io/potools/reference/get_message_data.md)
  : Extract user-visible messages from a package
- [`write_po_file()`](https://michaelchirico.github.io/potools/reference/write_po_file.md)
  [`po_metadata()`](https://michaelchirico.github.io/potools/reference/write_po_file.md)
  [`format(`*`<po_metadata>`*`)`](https://michaelchirico.github.io/potools/reference/write_po_file.md)
  [`print(`*`<po_metadata>`*`)`](https://michaelchirico.github.io/potools/reference/write_po_file.md)
  : Write a .po or .pot file corresponding to a message database

# Articles

### All vignettes

- [Writing a custom
  diagnostic](https://michaelchirico.github.io/potools/articles/custom-diagnostic.md):
- [Translation for package
  developers](https://michaelchirico.github.io/potools/articles/developers.md):
- [Translation for package
  translators](https://michaelchirico.github.io/potools/articles/translators.md):
